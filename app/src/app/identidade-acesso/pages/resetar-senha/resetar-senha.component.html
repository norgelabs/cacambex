<div class="container">

  <mat-card class="mat-elevation-z3">

    <mat-card-content>

      <form [formGroup]="mudarSenhaForm">

        <img src="assets/cacambex.jpeg" />

        <mat-form-field appearance="legacy" class="input-menor">
          <mat-label>Senha</mat-label>
          <input matInput maxlength="6" type="password" formControlName="novaSenha" [type]="hide ? 'password' : 'text'"
            placeholder="Senha de 6 dígitos" />
          <mat-error *ngIf="novaSenha.hasError('required')">
            Campo obrigatório
          </mat-error>
          <mat-error *ngIf="novaSenha.hasError('minlength')">
            Mínimo de 6 dígitos exigidos
          </mat-error>
          <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
            [attr.aria-pressed]="hide">
            <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>
        </mat-form-field>

        <mat-form-field appearance="legacy" class="input-menor">
          <input matInput maxlength="6" type="password" pattern="{{novaSenha.value}}"
            formControlName="confirmarNovaSenha" [type]="hide ? 'password' : 'text'" required
            placeholder="Confirmar senha" />
          <mat-error *ngIf="novaSenha.value!=confirmarNovaSenha.value">
            Senhas não conferem
          </mat-error>
          <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
            [attr.aria-pressed]="hide">
            <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>
        </mat-form-field>

        <ng-container *ngIf="!enviando;else load">
          <button class="btn-primario" mat-raised-button [disabled]="mudarSenhaForm.invalid" (click)="submit()">
            Atualizar minha senha
          </button>
        </ng-container>

      </form>

    </mat-card-content>

  </mat-card>

</div>
<ng-template #load>
  <button mat-raised-button [disabled]="true">
    <mat-icon>
      <mat-spinner color="primary" diameter="20">
      </mat-spinner>
    </mat-icon>
  </button>
</ng-template>
